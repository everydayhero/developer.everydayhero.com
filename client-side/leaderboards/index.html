<!DOCTYPE HTML>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>EverydayHero API: Campaign totals</title>
  <link rel="stylesheet" href="/stylesheets/pygments.css">
  <link rel="stylesheet" href="/stylesheets/app.css">
  <!--[if lt IE 9]>
    <script src="/javascripts/html5shiv-printshiv.js"></script>
  <![endif]-->
</head>
<body id=''>
  <header class="header top a--100">
    <a href="/"><h1>Everyday Hero: Developer</h1></a>
  </header>
  <section class="main center">
    <aside class="l--30 m--100 left side-bar">
      <div class="inner">
        <nav>
          <ul>
            <li><a href="/">Introduction</a></li>
            <li>
              <a href="/overview/">Overview</a>
              <ul id='menu_overview'>
                <li><a href="/overview/#environments">Environments</a></li>
                <li><a href="/overview/#schema">Schema</a></li>
                <li><a href="/overview/#parameters">Parameters</a></li>
                <li><a href="/overview/#auth-errors">Auth Errors</a></li>
                <li><a href="/overview/#validation-errors">Validation Errors</a></li>
                <li><a href="/overview/#http-verbs">HTTP Verbs</a></li>
                <li><a href="/overview/#pagination">Pagination</a></li>
                <li><a href="/overview/#caching">Caching</a></li>
                <li><a href="/glossary/">Glossary</a></li>
              </ul>
            </li>
            <li><a href="/authentication/">Authentication</a></li>
            

            <li class='title'>Resources</li>
            <li><a href="/campaigns/">Campaigns</a></li>
            <li><a href="/charities/">Charities</a></li>
            <li><a href="/leaderboards/">Leaderboards</a></li>
            <li><a href="/pages/">Pages</a></li>
            <li>
              <a href="/teams/">Teams</a>
              <ul id='menu_teams'>
                <li><a href="/invitations/">Invitations</a>
                  <ul>
                    <li><a href="/invitations/#create-individual-page-invitation">Individual Page</a></li>
                    <li><a href="/invitations/#create-join-a-team-invitation">Join Team Invitation</a></li>
                  </ul>
                </li>
                <li><a href="/join-requests/">Join Requests</a></li>
                <li><a href="/members/">Members</a></li>
              </ul>
            </li>
            <li><a href="/users/">Users</a></li>
            <li><a href="/search/#volunteering-opportunities">Volunteering</a></li>

            <li class='title'>Search &amp; Totals</li>
            <li><a href="/search/">Search</a></li>
            <li><a href="/totals/">Totals</a></li>

            <li class='title'>Integration Overviews</li>
            <li><a href="/oauth-integration/">OAuth Integration</a></li>
            <li><a href="/third-party-registration-integration/">Registration Integration</a></li>
            <li class='title'>Code Examples</li>
            
            <li>
              Client side integration
              <ul>
                <li>Totals
                  <ul>
                    <li><a href="/client-side/campaign-totals/">Campaign totals</a></li>
                    <li><a href="/client-side/page-total/">Page totals</a></li>
                  </ul>
                </li>
                <li><a href="/client-side/leaderboards/">Leaderboards</a></li>

              </ul>
            </li>
            <li class='title'>Reference</li>
            <li><a href="/console/">API Console</a></li>
            <li><a href="http://everydayhero.statuspage.io/">Platform Status</a></li>
            <li id="api-status">API Status: <span class='status down'>Down</span></li>
          </ul>
        </nav>
      </div>
    </aside>
    <section class="l--70 m--100 right content">
      <div class="inner">
        
          <h1>Campaign totals</h1>
          <h2 id="campaign-leaderboard-and-page-totals">Campaign leaderboard and page totals</h2>

<p>Using the <a href="/leaderboards/">campaigns leaderboard endpoint</a> and the <a href="/pages/">pages endpoint</a> you can include leaderboard and page totals on a page.</p>

<p>Below shows a demo JQuery snippet that will load the campaign leaders, and page totals on to a page.</p>

<pre>
<code class="javascript">&lt;script src="http://code.jquery.com/jquery-latest.min.js"&gt;&lt;/script&gt;
&lt;script type='text/javascript'&gt;
  var campaignLeaderboard = function(campaign_slug, campaign_uid, type, limit, callback) {
    $.getJSON('https://everydayhero.com/api/v2/campaigns/' + campaign_uid + '/leaderboard.jsonp?type=' + type + '&amp;limit=' + limit + '&amp;callback=?', function(leaderboard_data) {
      if (leaderboard_data.leaderboard.page_ids.length == 0) {
        callback([]);
        return;
      }
      $.getJSON('https://everydayhero.com/api/v2/pages.jsonp?ids=' + leaderboard_data.leaderboard.page_ids.join(',') + '&amp;callback=?', function(page_data) {
        var leaderboard = $.map(leaderboard_data.leaderboard.page_ids, function(page_id, i) {
          var page = $.grep(page_data.pages, function(element) {
            return element.id == page_id;
          })[0];
          return {
            name: page.name,
            amount: '$' + (page.amount.cents / 100),
            url: 'http://' + campaign_slug + '.everydayhero.com/au/' + page.slug
          }
        });
        callback(leaderboard);
      });
    });
  };
  campaignLeaderboard('give', 'au-0', 'individual', 10, function(data) {
    $(data).each(function(i, item) {
      $('#leaderboard').append('&lt;li&gt;' + item.name + ' raised ' + item.amount + '&lt;/li&gt;');
    });
  });
&lt;/script&gt;

&lt;ul id='leaderboard'&gt;&lt;/ul&gt;</code>
</pre>

<h2 id="this-will-display">This will display:</h2>

<ul>
  <li>Unionsâ€™ Fire Appeal 2013 raised $81837.26</li>
  <li>Scott Malcolm raised $67655</li>
  <li>Rebuilding Dana raised $52715</li>
  <li>Michael Hassett raised $50250</li>
  <li>Anton raised $44170</li>
  <li>Wee Erin G xxx raised $40820</li>
  <li>Kicking Goals for Kids with Cancer raised $36950</li>
  <li>OzForex Foreign Exchange raised $31850</li>
  <li>Pritchard Francis Perth to Surf 2013 raised $30350</li>
  <li>Brothers1VBrothers raised $27707.6</li>
</ul>

        
      </div>
    </section>
  </section>
  <script src="/javascripts/jquery.js"></script>
  <script src="/javascripts/console.js"></script>
  <script src="/javascripts/purl.js"></script>
  <script src="/javascripts/app.js"></script>
</body>
</html>
